{"version":3,"file":"reset-DAVNyB3X.js","names":[],"sources":["../src/lib/queues/reset.ts"],"sourcesContent":["import { debug } from '../debug'\nimport { debounceController } from './debounce'\nimport { globalThrottleQueue } from './throttle'\n\nlet mutex = 0\n\nexport function setQueueResetMutex(value = 1): void {\n  mutex = value\n}\n\nexport function spinQueueResetMutex(): void {\n  // Don't let values become too negatively large and wrap around\n  mutex = Math.max(0, mutex - 1)\n  if (mutex > 0) {\n    return\n  }\n  resetQueues()\n}\n\nexport function resetQueues(): void {\n  debug('[nuqs] Aborting queues')\n  debounceController.abortAll()\n  const abortedKeys = globalThrottleQueue.abort()\n  abortedKeys.forEach(key => debounceController.queuedQuerySync.emit(key))\n}\n"],"mappings":";;;;AAIA,IAAI,QAAQ;AAEZ,SAAgB,mBAAmB,QAAQ,GAAS;AAClD,SAAQ;;AAGV,SAAgB,sBAA4B;AAE1C,SAAQ,KAAK,IAAI,GAAG,QAAQ;AAC5B,KAAI,QAAQ,EACV;AAEF;;AAGF,SAAgB,cAAoB;AAClC,OAAM;AACN,oBAAmB;CACnB,MAAM,cAAc,oBAAoB;AACxC,aAAY,SAAQ,QAAO,mBAAmB,gBAAgB,KAAK"}